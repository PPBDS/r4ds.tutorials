---
title: RStudio and Code
author: Miriam Heiss and David Kane
tutorial:
  id: rstudio-and-code
output:
  learnr::tutorial:
    progressive: yes
    'allow_skip:': yes
runtime: shiny_prerendered
description: 'Introduction to R scripts and Quarto. Covers material from Chapter 3
  Workflow: basics, Chapter 5 Workflow: code style, Chapter 7 Workflow: scripts and
  projects, and Chapter 29 Quarto.'
---

```{r setup, include = FALSE}
library(learnr)
library(tutorial.helpers)
library(tidyverse)
library(knitr)
knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 60, 
        tutorial.storage = "local")
```

```{r copy-code-chunk, child = system.file("child_documents/copy_button.Rmd", package = "tutorial.helpers")}
```

```{r info-section, child = system.file("child_documents/info_section.Rmd", package = "tutorial.helpers")}
```


<!-- Older Comments -->

<!-- Most important issue is decreasing the size of the associated images. Packages on CRAN can only be 5 mb. So, we can't have a dozen 1 mb+ images and gifs for just this tutorial. Not sure what the best answer is! First, we could shrink them, but would not be enough? Second, we could just delete them and replace them with descriptions or even ascii images. Third, we could store the images elsewhere and just load them when the tutorial is created. -->

<!-- Pull out all the best parts of the relevant chapters, mostly in order, and add them as knowledge drops throughout. -->

<!-- Will we ever move from Rpubs to Quarto Pub? Maybe. The help page for the quarto package does not look useful, but ChatGPT assures me that this is possible with quarto_render() and quarto_publish(). But, maybe not . . .-->

<!-- Standardize how we refer to short cut keys. Use `Cmd/Ctrl + s`. The RStudio doc use cool emojis . . . -->

<!-- Do more to bring the new RStudio user docs into the discussion. -->

<!-- Lots of the gifs don't match the written descriptions. -->

<!-- Explain throughout, starting in the R script section, that there is a difference between the current workspace and the Quarto document itself. Maybe restart the R session more often? -->

<!-- There are often two or more ways to do the same thing: like create a new project or a new script. We should mention and explain this throughout. We should also standardize the approach we use, at least the first time through. -->

<!-- Maybe discuss dot files and directories, and why they appear and don't appear? -->

<!-- Hardest part is creating an R Project the first time. We can break it into separate steps? Can we show them the two different Project drop down methods? Actually, this should be taught from the File menu. Fix the gif to do that!  -->

<!-- MAYBE NOT! Restart R session several times. Restart RStudio session at least twice. Once for R Projects and once before starting R scripts.  -->

<!-- Do everything in visual with first Quarto document and then use source with the second.  Note how I misunderstood this! I thought "source" meant sourcing the code. This is about "Source" versus "Visual" buttons. -->

<!-- Code chunk labels are important. Always use them, at least in second Quarto document creation.-->

<!-- Make a second script. And maybe a third. -->

<!-- Should include a better code chunk options example. Not sure warning message example discussion works. Worth improving. Or maybe replacing with something simpler like echo or eval. Just want students to be comfortable with code chunk options. (Is this still the terminology in Quarto?) -->

<!-- Discuss options for whole document and how it goes in header. Example:  -->

<!-- execute: -->

<!--   echo: false -->


<!-- DK: Many images need updating because of the move to Quarto Pub (or maybe not?) and RStudio -> Posit. -->

## Introduction
### 

This tutorial covers [Chapter 3 Workflow: basics](https://r4ds.hadley.nz/workflow-basics.html),  [Chapter 5  Workflow: code style](https://r4ds.hadley.nz/workflow-style.html), [Chapter 7  Workflow: scripts and projects](https://r4ds.hadley.nz/workflow-scripts.html), and some material in [Chapter 29  Quarto](https://r4ds.hadley.nz/quarto.html) from [*R for Data Science (2e)*](https://r4ds.hadley.nz/) by Hadley Wickham, Mine Ã‡etinkaya-Rundel, and Garrett Grolemund.

Until now, you have been typing your code into the neat boxes in our tutorials. What if you want to start working on your own? In this tutorial you will learn how to use R scripts and Quarto documents, and how to publish your work with Rpubs!

## Checking your setup
### 

This tutorial assumes that you have read and completed all the steps in the Getting Started tutorial from the **tutorial.helpers** package chapter. We will ask you to **c**opy/**p**aste the **c**ommand/**r**esponse so often, we will be shortening this instruction to CP/CR.

### Exercise 1

You should have installed the **tidyverse** package, among others. Load the `tidyverse` package into your R Console using the `library()` function.

### 

Run `search()` in the Console to see the libraries that you've currently loaded, then copy and paste the result into the space below.

```{r checking-your-setup-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

There should be strings such as "package:tidyverse" in the output. These are the packages that you are currently loaded in your work space.

### Exercise 2

In the Console, run:

```{r eval = FALSE, echo = TRUE}
rstudioapi::readRStudioPreference(name = "load_workspace",
                                  default = "Code failed.")
```

CP/CR.

```{r checking-your-setup-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

The result should be FALSE. If the result was not FALSE, you should run this command in the Console:

`tutorial.helpers::prep_rstudio_settings()`

This function ensures that your settings for RStudio are sensible.

### Exercise 3

Look at the top left of your R Console. Here you should see the version of R you are running. It should look something like the image below.

```{r}
include_graphics("images/r_version.png")
```

Type `R.version` into the Console and hit return. CP/CR.

```{r checking-your-setup-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

This should return a list of variables, including "major" and "minor", which tell you your R Version. This should be the same as the version you saw at the top left of the Console. `R.version` does not include parentheses at the end. It is a built-in R constant, not a function.

### Exercise 4

Shortly, we will create a new project for you to start working in. Before we do this, it might be useful to understand where you are right now.

In the R Console, run `getwd()`. CP/CR.

```{r checking-your-setup-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

This function returns the path to your R working directory. A path is simply the path you would use to reach a location on your computer. In this case, if you wanted to find the folder from which R is running, you would follow the path returned by `getwd()`.

More info on paths can be found on the [UC Berkeley website](https://people.ischool.berkeley.edu/~kevin/unix-tutorial/section3.html).

### Exercise 5

Whenever you start a new R Project, you will want to store it in a location which you can easily find. Right now, you are likely in a secluded location on your computer. It would be much more useful to have a location dedicated to your R Projects.

Let's make a folder, and call it `projects`

If you need help making a folder, helpful resources can be found [here](https://support.microsoft.com/en-us/office/create-a-new-folder-cbbfb6f5-59dd-4e5d-95f6-a12577952e17) for Windows, and [here](https://support.apple.com/guide/mac-help/organize-files-using-folders-mh26885/mac) for macOS.

It would also be a good idea to store this folder on your desktop, so that it can be found easily. **NOTE: Do not store this folder inside of a cloud storage directory such as OneDrive.** This can cause heaps of unforeseen problems for you in the future.

## R Projects
### 

Good data scientists keep their work organized. You should place your work in different R Projects, which are simply folders (or directories) on your computer with some helper files.

### Exercise 1

<!-- Background: https://support.rstudio.com/hc/en-us/articles/200526207-Using-RStudio-Projects#:~:text=RStudio%20projects%20are%20associated%20with,have%20R%20code%20and%20data -->

Please read all of the instructions before moving on, as you will be locked out of this tutorial while making your project.

Click `File -> New Project` from the main menu:

```{r}
include_graphics("images/new_project.png")
```

Select `New Directory`:

```{r}
include_graphics("images/new_project_2.png")
```

Select `New Project`:

```{r}
include_graphics("images/new_project_3.png")
```

Yes, it is confusing that this is the second time you have selected `New Project`. Name the Project `analysis-1` and change the project subdirectory to your new `projects` folder.

```{r}
include_graphics("images/new_project_4.png")
```

Click `Create Project`. Recall the "Getting Started" tutorial, where we saw the "Terminate Jobs" warning. **Do not click on the Terminate Jobs** button yet. Doing so will close this tutorial. Check out our gif first.

<!-- DK: Need a new gif which uses the File menu to start things. -->

```{r}
include_graphics("images/new_project.gif")
```

Go ahead and click "Terminate Jobs". You will need to restart the tutorial but, once you do, you will be in this new project. For the rest of this tutorial, we will be working in `analysis-1`.

### 

Run `getwd()`. CP/CR.

```{r r-projects-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

This path should now be different than our previous path, similar to the path below. Creating/opening an R Project moves the R session to that directory.

```{r}
include_graphics("images/path_example.png")
```

### 

If your path does not include your `projects` folder, you likely did not select the `projects` directory when making `analysis-1`.

### Exercise 2

Run `list.files()`. CP/CR.

```{r r-projects-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

`list.files()` returns files contained in your current R Project. This should return only the file `analysis-1.Rproj`.

Keeping all the files associated with a given project (input data, R scripts, analytical results, and figures) together in one directory is such a wise and common practice that RStudio has built-in support for this via projects.

### Exercise 3

Type `readLines("analysis-1.Rproj")` in the R Console and hit enter. CP/CR.

```{r r-projects-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

This should return lines containing some basic settings for your R Project. For example, `RestoreWorkspace` is set to `default`.

## R Scripts
### 

So far, we have only worked in the R Console, but it's quite difficult to type more than a few lines of code into the Console at once.

One solution is **R scripts**. These are files which contain a permanent copy of our code.

### Exercise 1

Create an R script by clicking the `File -> New File` drop down menu at the top left of your RStudio Session, and selecting "R Script".

```{r}
include_graphics("images/new_r_script.gif")
```

### 

An untitled, empty file should pop up above the R Console. This is your R script file. You can also create a new R script using the keyboard shortcut `Cmd/Ctrl + Shift + N`. The `Cmd/Ctrl` usage here means that Apple users type the Command key and Windows users type the Control key.

### 

Type `5 * 5` into your R script file and run the file by clicking the "Source" button in the top right corner. This will run all your code in the Console. CP/CR.

```{r r-scripts-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

You answer should look like this:

````
> 5 * 5
[1] 25
> 
````

Depending on your computer set up, those lines might be prefaced by something like:

````
source("~/.active-rstudio-document", echo=TRUE)
````

### 

The `5 * 5` should have run in your R Console. The return value is `25`. Whenever you run an R script file by hitting the "Source" button, Rstudio will send all the code in the file to the R Console, as if you had retyped it all there and hit return.

### Exercise 2

There are often "short-cut key" combinations which perform the same task as clicking a button. Placing your cursor inside the R script window and hit or using the keyboard shortcut `Cmd/Ctrl + Shift + Enter`.

### 

This does the same thing as hitting the "Source" button. CP/CR.

```{r r-scripts-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

Using short-cut keys is quicker and more professional than clicking buttons.

### Exercise 3

In your R script, type `6 + 3` in the line after `5 * 5`. If you source this file, all the lines will execute. Try it. CP/CR.

```{r r-scripts-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

The output you see is the same as what would happen if you copied each line to the Console and hit return after each one.

### Exercise 4

Instead of sourcing the entire file, we can just execute (or "run") a single line. In your R script, place your cursor on the same line as `6 + 3` and click the "Run" button to the left of the "Source" button. CP/CR.

```{r r-scripts-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

Instead of both lines in the script executing, only the second line does. And the process by which this happens has nothing to do with the entire script. Run is not the same thing as Source. With Run, you are just copying/pasting one line from the script to the Console.

### Exercise 5

The short-cut key for running a single line of code is `Cmd/Ctrl + Enter`. In your R script, place your cursor on the same line as `5 * 5` and hit `Cmd/Ctrl + Enter`. CP/CR.

```{r r-scripts-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

`Cmd/Ctrl + Enter` is probably the single most commonly used short-cut key because it is very handy to execute your code line-by-line.

Instead of running your code expression-by-expression, you can also execute the complete script in one step with `Cmd/Ctrl + Shift + S`. Doing this regularly is a great way to ensure that youâ€™ve captured all the important parts of your code in the script. But note that this short cut key is not the same thing as Source. In particular, Source causes every command in the script to be echoed.

<!-- DK: Above is tough to follow. How often do people use `Cmd/Ctrl + Shift + S`? -->

### Exercise 6

Go back to the first line in your R script. Change `5 * 5` to `x <- 5 * 5`, thereby creating an object named `x` with a value of 25. Click the "Source" button.

### 

In the Console tab, run `ls()`. CP/CR.

```{r r-scripts-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

`ls()` returns a list of objects present in your environment. These are the same objects displayed in your Environment tab in the top right corner of RStudio. You should see that it returned `x`, as you defined `x` using your R script.

### Exercise 7

So far, we have been working in an unsaved file. At the top of the Code pane, the file should currently be called `Untitled1`. You will see that the text is in red, with an asterisk. This indicates that there are unsaved changes in the file.

```{r}
include_graphics("images/untitled_script.png")
```

### 

Delete all code currently in your R script file. Then click the save icon below the script title, or use the shortcut `Cmd/Ctrl + s` to save the script. The first time you save a file you will also name it. Let's call this file `script-1`. The `.R` suffix is added automatically.

In the Console, run `list.files()`. CP/CR.

```{r r-scripts-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

Recall that when we ran this earlier in the tutorial, it returned only the `analysis-1.Rproj` file. It should now also return the `script-1.R` file.

### Exercise 8

Now that we're settled in and have started working with R scripts, let's get to plotting. We will be making the following plot, step by step.

```{r}
hist_p <- ggplot(data = diamonds,
                 mapping = aes(x = carat)) +
  geom_histogram(bins = 100,
                 color = "white") +
  labs(title = "Histogram of Carat (Weight) among 50,000 Diamonds",
       subtitle = "Carats just at or above meaningful numbers are very common",
       x = "Carat",
       y = "Count",
       caption = "diamonds data set from ggplot2 package")

hist_p
```

### 

At the top of your R script file, type

```{r eval = FALSE, echo = TRUE}
library(tidyverse)
```

Run the entire file with `Cmd/Ctrl + Enter`. Then use the `search()` function in your R Console. CP/CR.

```{r r-scripts-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

This function returns a list of loaded packages. This should include the string `package:tidyverse`.

### Exercise 9

On the next line, start a `ggplot()`, setting `data` to `diamonds` and mapping `x` to `carat` with the following code.

```{r eval = FALSE, echo = TRUE}
ggplot(data = diamonds,
       mapping = aes(x = carat))
```

Run the entire file again. This should generate a blank plot in the "Plots" tab at the bottom right of your RStudio session.

### 

In the Console, run `readLines("script-1.R")`. CP/CR.

```{r r-scripts-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

`ggplot()` will generate only a blank plot until a `geom` layer is added. Note that you might get a warning when using `readLines()` if `script-1.R` does not end with a blank line. This warning does not matter to us but it is always good practice to end a text file with a blank line.

### Exercise 10

Add a layer with `geom_histogram()`. Change the border color in our graph by setting `color` to `"white"` within `geom_histogram`, and change the number of columns in our plot by setting the `bins` argument to `100`.

```{r eval = FALSE, echo = TRUE}
geom_histogram(bins = 100,
               color = "white")
```

Run the file. (Note the sloppiness of this instruction.) To "run" a script generally means to "execute" it, meaning sending it to the R process. We have learned two ways to (easily) execute an entire file: pressing the "Source" button or hitting `Cmd/Ctrl + Shift + Enter`.

### 

This should generate columns on your plot. Did you remember to place a `+` after the `ggplot()` call and before the `geom_histogram()` layer?

### 

In the Console tab, run `readLines("script-1.R")`. CP/CR.

```{r r-scripts-10}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

Keep in mind that the `color` argument used here modifies the border color of our columns. To change the fill color, use the `fill` argument.

### Exercise 11

Now let's make our graph look a little nicer by adding a `labs()` layer with an appropriate title, subtitle, and axis labels.

Reminder, this is what our graph should look like

```{r}
hist_p
```

Run your R script file to see your completed plot. Again, note the language here! Above, we made a distinction between the "Source" and "Run" buttons above --- and that distinction is real. However, in casual language, we use the word "run" to generically mean "Tell the computer to execute the commands in this file." We don't necessarily care how that is achieved.

### 

In the Console tab, run `readLines("script-1.R")`. CP/CR.

```{r r-scripts-11}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 8)
```

### 

Good coding style is like correct punctuation: you can manage without it, butitsuremakesthingseasiertoread. Even as a very new programmer, itâ€™s a good idea to work on your code style. Using a consistent style makes it easier for others (including future-you!) to read your work and is particularly important if you need to get help from someone else.



### Exercise 12

Now we have the code which creates a plot in `script-1`. How do we use this plot for other things? Right now we have to run `script-1` every time we want to see the plot, which is a little inconvenient.

### 

We can use the `ggsave()` function. Type `?ggsave` in the R Console. This will open the help page for `ggsave()`. Copy and paste the Description from the help page into the space below.

```{r r-scripts-12}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

`ggsave()` is used to save plots as individual files, separate from the code which created the plot. In this case we will be using the "png" format.

### Exercise 13

We want to save our entire graph to an object, which can be done by setting our plot equal to a variable. Call this variable `hist_p`.

Now using the `ggsave()` function we can create a png of our plot from our code. In `ggsave()`, set `plot` to `hist_p`, `file` to `"hist-harvard.png"`.

Your entire file should look like:

```{r eval = FALSE, echo = TRUE}
library(tidyverse)

hist_p <- ggplot(data = diamonds,
                 mapping = aes(x = carat)) +
  geom_histogram(bins = 100,
                 color = "white") +
  labs(title = "Histogram of Carat (Weight) among 50,000 Diamonds",
       subtitle = "Carats just at or above meaningful numbers are very common",
       x = "Carat",
       y = "Count",
       caption = "diamonds data set from ggplot2 package")

ggsave(plot = hist_p, file = "hist-harvard.png")
```

### 

Run your code.

### 

In the Console, run `list.files()`. CP/CR.

```{r r-scripts-13}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

You should see the `hist-harvard.png` file which contains your plot. In the bottom right corner of your workspace in the `Files` tab, click on the `hist-harvard.png` file to view your plot.

If the title text flows out of the image, you might want to modify the `scale` argument in `ggsave()` to find a better image size. `scale` is set to 1 by default.

## Quarto 1
### 

<!-- No code chunks in this section. Start simple! -->

Quarto is a file format for making dynamic documents with R and other languages, like Python. To learn more about Quarto and how to use it, check out the [official webpage](https://quarto.org/). Quarto is the successor technology to [R Markdown](https://rmarkdown.rstudio.com/).

### Exercise 1

<!-- DK: These instructions do not match the gif. -->

Click `File -> New File` at the top left of your RStudio window, and select "Quarto Document...". You will be offered the option of providing a "Title" and "Author" for the document. **Note that the title of a document has no necessa

<!-- PC: Move this later? -->

```{r}
include_graphics("images/new_quarto_doc.gif")
```

### 

Run `list.files()` in the Console. CP/CR.

```{r quarto-1-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

Since we have not saved the file yet, it does not appear in this listing.

Quarto is a command line interface tool, not an R package. This means that help is, by-and-large, not available through `?` at the R Console. Instead, as you work through this tutorial, and use Quarto in the future, you should refer to the [Quarto documentation](https://quarto.org/).


### Exercise 2

Save the Quarto document with `File -> Save`. You can also click the disk icon at the top of the file or by use the shortcut `Cmd/Ctrl + s`. Name the file `quarto-1`. The `.qmd` file extension is added automatically.

Now that the document is saved, run `list.files()`. CP/CR.

```{r quarto-1-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

This should return `quarto-1.qmd`, as well as `analysis-1.Rproj`, `script-1.R`, and `hist-harvard.png`. Note how different suffixes are used for different types of files.


### Exercise 3

In the top left corner above your Quarto document, you should see the buttons "Source", and "Visual". Click on "Source". This will revert how we see our Quarto document to be more similar to our R script. We will explore the "Visual" option later.

Run `readLines("quarto-1.qmd") |> tail()` in the Console. CP/CR.


```{r quarto-1-3}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

`readLines()` reads in each line in a text file into a character vector. Each line in `quarto-1.qmd` is placed in its own element in the vector. With `tail()`, we only see the last 6 lines.



### Exercise 4

The default Quarto file should look like this:

```{r out.width = "875px"}
knitr::include_graphics("images/qmd_source.png")
```

### 

As you can see, a lot of the text is regular plain text, not code. However, there are code chunks which allow us to execute code when the document is rendered. Here's an example of an R code chunk:

```{r}
knitr::include_graphics("images/source_chunk.png")
```

Quarto documents utilize Markdown (an easy-to-write plain text format), which can contain chunks of embedded code. These code chunks can be written in many languages, including R and Python. Code chunks allow you to use R to create plots and other graphics.

### 

The [YAML header](https://bookdown.org/yihui/rmarkdown-cookbook/rmarkdown-anatomy.html) is everything between the dashed lines at the top of the file, including the dashed lines themselves. Copy-and-paste the YAML header of the file below.

```{r quarto-1-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 4)
```

### 

The YAML header includes "metadata" about the document itself, things like the title and the author. In this case, `format: html` means that the document will be rendered as an html file.
`editor: visual` tells RStudio, when opening the file on a new occasion, to set the editor to visual mode. This is the same thing as pressing the "Visual" button.


### Exercise 5

To "render" our Quarto document, click the "Render" arrow at the top of the Code pane, or use the shortcut `Cmd/Ctrl + shift + k`.

Run `list.files()`. CP/CR.

```{r quarto-1-5}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

You should see a new file, `quarto-1.html`. This is the file created by rendering. The Viewer tab in the Files pane in the lower right of your workspace should also display the file.

### Exercise 6

Note how the html document shows both the code `1 + 1` and the result of the addition. This is the magic of Quarto. We can easily document and reproduce our work. In `quarto-1.qmd`, change `1 + 1` to `6 + 3`. Save the file. Render it again.

Run `readLines("quarto-1.qmd")[grepl("6", readLines("quarto-1.qmd"))]`. CP/CR.


```{r quarto-1-6}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 17)
```

### 

This should return a single character vector with `"6 + 3"`, the line which you added to the file. Apologies for the complexity of the call needed to pull out that line.

### Exercise 7

Delete everything except the YAML header -- the text in the box at the top of the file, as well as the dashes. Add "This is my first Markdown text." at the bottom of the document.

### 

Save the file and run `readLines("quarto-1.qmd")`. CP/CR.

```{r quarto-1-7}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

This should return the last 6 lines of your Quarto document. If you do not have an empty line at the end of your file, you will get a warning message like this:

<span style="color: red;">
Warning message:
In readLines("quarto-1.qmd") :
  incomplete final line found on 'quarto-1.qmd'
</span>

The solution is to add an empty line to the end of the file. This is always a good idea with text files.

### Exercise 8

Render the document. This will replace the current `quarto-1.html` file, both in the current directory and in the Viewer pane.

In the following box, copy all of the text from your rendered Quarto document, from the Viewer pane.


```{r quarto-1-8}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Quarto files are designed to be used in three ways:

* For communicating to decision-makers, who want to focus on the conclusions, not the code behind the analysis.

* For collaborating with other data scientists (including future you!), who are interested in both your conclusions, and how you reached them (i.e. the code).

* As an environment in which to do data science, as a modern-day lab notebook where you can capture not only what you did, but also what you were thinking.


### Exercise 9

In Quarto documents, you can use [Markdown syntax](https://quarto.org/docs/authoring/markdown-basics.html). You can use this to create **bold** or *italic* text, and headers.

### 

Make the text created in the previous exercise a header by adding `##` at the beginning of the line (followed by a space), then adding this text under that new header: `You can do a lot of cool things in Quarto like **bold** and *italic* text.` Render the file again. Does everything look good in the Viewer?

### 

Run `readLines("quarto-1.qmd") |> tail()` in the Console. CP/CR.

```{r quarto-1-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

You can find a full list of Markdown formatting styles and commands [here](https://www.markdownguide.org/basic-syntax/).

### Exercise 10

<!-- DK: From here to the end of the section could use some clean up. -->

In the top left corner of the Code pane, you should be able to see two buttons: "Source" and "Visual". "Source" shows you all the code while "Visual" shows you (mostly) how the document will look after being rendered. You can edit a Quarto document while in either "Source" or "Visual" mode.

### 

We are going to switch to "Visual" and explore how we can edit while still in "Visual". Switch to "Visual" by clicking on it.

### 

Type "I made this through Quarto" below "This is my first Markdown text" while still in "Visual". Copy and paste everything in your document (while still in "Visual") into the box below.

```{r quarto-1-10}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

Save the file. Render the document, just to make sure it worked.


## Quarto 2
### 

Let's create another Quarto document so that we can explore how to include R code within the document.

### Exercise 1

Follow the same procedure to create a new Quarto document. `File -> New File -> Quarto Document ...`. Use "My Second Quarto Document" as the title and your name for the author. Save the document as `quarto-2.qmd`. Render the document.

Run `list.files()`. CP/CR.

```{r quarto-2-1}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

The listing should include `quarto-2.qmd` and `quarto-2.html`.

### Exercise 2

Delete everything in `quarto-2.qmd` except for the YAML header. Delete the `editor: visual` line from with in the YAML header. Do not delete the dashes which provide the border for the YAML header. The file should look like:

```{verbatim, echo = TRUE}
---
title: "My Second Quarto Document"
author: "David Kane"
format: html
---
```

Run `readLines("quarto-2.qmd") |> head(6)` in the Console. CP/CR

```{r quarto-2-2}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 6)
```

### 

The `editor: visual` line tells RStudio to switch to Visual, rather than Source, mode when you first open the file. Most people prefer to work in Source mode, which is the default.


### Exercise 3

Add a code chunk either by pressing the Add Chunk command at the top of the editor on the right (the green C button with a plus sign next to it) or with the shortcut `option + cmd + i`.

The newly created code chunk will be empty, looking like:

````{verbatim, echo = TRUE}
```{r}

```
````

Save the file, and run `readLines("quarto-2.qmd") |> tail()` in the Console. CP/CR.

```{r quarto-2-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 6)
```

### 

Note the curly braces `{}` at the top of the chunk, with an `r` inside. The `r` indicates that the language which Quarto should use with the code is R.

In this tutorial, we will only include R code within our code chunks. But you can also use Python and other languages. You simply switch "python" for "r" within the curly brackets.


### Exercise 4

Put `2 * 2` within the code chunk. Render the document. Copy and paste the entire html document here.

<!-- DK: Is it clear enough what "paste the entire html" means? -->

```{r quarto-2-4}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 8)
```

### 

We see both the code itself and the result of the code. This is an example of a "reproducible" analysis. We can re-render the document anytime we like, thereby confirming our results.

### Exercise 5

You can add options to executable code. Example:

Add `#| echo: false` within the code chunk, above the `2 * 2` calculation. It should look like:

````{verbatim, echo = TRUE}
```{r}
#| echo: false

2 * 2
```

````

Render the document. Copy/paste the html below.

```{r quarto-2-5}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 6)
```

### 

The `echo: false` option disables the printing of code (only output is displayed). Note that this same example appears in the bottom of the default for new Quarto Documents.

### Exercise 6

Code chunk options are always proceeded by `#|` -- pronounced "hash-pipe". This is followed by an option/value pair, separated by a colon.

Add another code option for this code chunk: `#| label: calculation`. You can have multiple code chunk options for a single code chunk. The order does not matter, but each belongs on its own line and must be proceeded by `#|`. Render the document. Copy/paste the html below.

```{r quarto-2-6}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

<!-- DK: The value for label no longer appears during rendering. So, why bother with it? Other code chunk options to demonstrate? -->

The `label` option has no effect on the output.

### Exercise 7

Delete the current code chunk. Add a new one. In this new code chunk, put `library(tidyverse)`. Render the document. A message about "Attaching core tidyverse packages" should appear in the html file. Copy/paste that message below.


```{r quarto-2-7}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 10)
```

### 

We will include the **tidyverse** package in almost very Quarto document which we create. Indeed, the top of most Quarto document includes a code chunk which loads all the packages which we use in the analysis.

### Exercise 8

Add `#| message: false` to the code chunk. Render the document. Copy/paste the entire html file below.

```{r quarto-2-8}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 5)
```

### 

We want to make our Quarto html files beautiful. That means we will almost always "mask" ugly messages like this. Our readers don't care about such aRcana. They care about our analysis.

### Exercise 9

Add two more code chunk options: `echo: false` and `label: setup`. Don't forget to preface each by the hash-pipe: `#|`. Render the document. Copy/paste the html below.

```{r quarto-2-9}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

The html is empty, except for title and author.

`echo: false` prevents the code from being "echoed," from appearing in the final document. We generally want this because most readers don't know R and don't care about our code. It is conventional to label the code chunk which loads libraries and takes care of other housekeeping as the "setup" code chunk.


### Exercise 10

**Important Point**: There are two different "worlds" with which we are dealing. First is the world of the Quarto document, the qmd file. Second is the world of the Console in our current RStudio session. **These worlds only connect when we connect them**. Something written in a Quarto document --- or an R script --- is not part of our current R session.

### 

Right now, the **tidyverse** package has not been loaded into the current R session. To load it, you must run the code chunk. This can be done using the Run button in the top right of the editor, or with the shortcut `Cmd + shift + enter`.

Run the code chunk. Run `pull(mtcars, 1)` in the Console. CP/CR.

```{r quarto-2-10}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

If you run this command without running `library(tidyverse)` in the Console, you will get an error about not finding the "pull" function. The fact that `library(tidyverse)` exists in the qmd, and that you have "used" it there by rendering the document, has no bearing on the world of the Console.

### Exercise 11

Let's create the following scatterplot in our Quarto document:

```{r}
scat_p <- ggplot(data = iris,
                 mapping = aes(x = Sepal.Width,
                               y = Sepal.Length,
                              color = Species)) +
  geom_point() +
  labs(title = "Measurements for Different Species of Iris",
       subtitle = "Virginica has the longest sepals",
        x = "Sepal.Width",
        y = "Sepal.Length",
       caption = "Fisher (1936)")
scat_p
```

### 

Create a new code chunk. Add this code.

```{r eval = FALSE, echo = TRUE}
ggplot(data = iris,
       mapping = aes(x = Sepal.Width,
                     y = Sepal.Length,
                     color = Species))
```

### 

Render the file. You should now see your R code (since we did not set `echo: false`), as well as a blank plot (since we have not added a geom layer).

Run `readLines("quarto-2.qmd") |> tail(10)` in the Console. CP/CR.

```{r quarto-2-11}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 10)
```

Make sure to format your code so that it looks neat and tidy. Specifically:

* Put spaces on either side of mathematical operators apart from `^` (i.e. `+`, `-`, `==`, `<`, â€¦), and around the assignment operator (`<-`).

* Donâ€™t put spaces inside or outside parentheses for regular function calls. Always put a space after a comma, just like in standard English.

* `|>` should always have a space before it and should typically be the last thing on a line.

* If the function youâ€™re piping into has named arguments (like mutate() or summarize()), put each argument on a new line. If the function doesnâ€™t have named arguments (like select() or filter()), keep everything on one line unless it doesnâ€™t fit, in which case you should put each argument on its own line.

<!-- DK: Maybe split these up. -->

### Exercise 12

To add a geom layer, add `geom_point()` to your plot. You will need to render the file again. Now our plot isn't empty! It shows a scatterplot!

### 

Run `readLines("quarto-2.qmd") |> tail(10)` in the Console. CP/CR.

```{r quarto-2-12}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 10)
```

### 

RStudio automatically saves the contents of the editor when you quit, and automatically reloads it when you re-open. Nevertheless, itâ€™s a good idea to avoid Untitled1, Untitled2, Untitled3, and so on and instead save your documents and give them informative names.

### Exercise 13

We just built the basic graph, but it still looks a little ugly. Labels are important for adding context to the graph and making it easier to understand.

Use the `labs()` function to add appropriate title and axis labels to the graph.

Reminder, this is what our plot should look like

```{r echo = FALSE}
scat_p
```

### 

Render the file again to see your completed graph.

### 

Run `readLines("quarto-2.qmd") |> tail(10)` in the Console. CP/CR.

```{r quarto-2-13}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

We recommend you always start your Quarto documents with the packages you need. That way, if you share your code with others, they can easily see which packages they need to install. Note, however, that you should never include `install.packages()` in a Quarto document or R script which you share. Itâ€™s inconsiderate to hand off something that will change something on their computer if theyâ€™re not being careful!

## Quarto 3
###

This section will teach you how to use *inline* R code, allowing you to insert calculated results in the middle of text.

### Exercise 1

Create a new Quarto document with "My Third Quarto Document" as the title and you as the author. Save the file as `quarto-3.qmd'. Render it.

Run `list.files()`. CP/CR.

```{r quarto-3-1}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

###

The files `quarto-3.qmd` and `quarto-3.html` should appear in this list.

### Exercise 2

Look at all the default material in the Quarto document. Read the html file. You should now understand all the tricks which turn the former into the later, especially the use of code chunk options.

Copy/paste the last sentence of the html file here.

```{r quarto-3-2}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

###

<!-- DK: Doesn't really apply here. Maybe we need some questions which illustrate these points. -->

Remember that variable names (those created by `<-` and those created by `mutate()`) should use only lowercase letters, numbers, and `_`. Use `_` to separate words within a name.
 
As a general rule of thumb, itâ€™s better to prefer long, descriptive names that are easy to understand rather than concise names that are fast to type.
 
### Exercise 3

We are now going to learn how to include the results of R calculations *inline*, that is in the middle of sentence. But, first, delete everything in `quarto-3.qmd` after the YAML header. Then, add a new code chunk. Add `x <- 123456789` to that code chunk. Render the document.

Copy/paste the html file below.

```{r quarto-3-3}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

###

Because we have not added any code chunk options, we see the code in the html file. But there is no output because assignment of a value does not result in output in R.

### Exercise 4

Instead of using the `echo: false` code chunk option in every code chunk in a document, we can set this option in the YAML header itself. Add

```{verbatim echo = TRUE}
execute:
  echo: false
```

to the YAML header. This sets `echo` to `false` throughout the document. Render `quarto-3.qmd`. The resulting html is empty, other than the title and author.

Run `readLines("quarto-3.qmd") |> tail(6)` at the Console. CP/CR.


```{r quarto-3-4}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

###

If we are just using a code option for one or two code chunks, then we can just place them in the relevant code chunks, using hash-pipe. However, any code chunk option which applies to most/all code chunks should be placed in the YAML header under the `execute:` category.

### Exercise 5

Add the following sentence to the qmd: `The value of x is ?, a surprisingly high value.` Render the document.

Run `readLines("quarto-3.qmd") |> tail(6)` at the Console. CP/CR.

```{r quarto-3-5}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

###

We want the actual value of `x` to appear in the document, in place of the `?`. To do so, we need to make use of *inline* code.

### Exercise 6

<!-- DK: This formatting is very tricky. If you try to include the inline code in the middle of a sentence, all hell breaks loose, even if you comment out that line! -->

Replace the `?` in your sentence with:

```{verbatim, echo = TRUE}
`r x`
```

Include the backticks. They tell Quarto that you want to evaluate the code `x` using the R lanaguge. In this case, that code is just the letter `x`, which evaluates to (prints out) the number we have assigned. Render the document.

Run `readLines("quarto-3.qmd") |> tail(6)` at the Console. CP/CR.

```{r quarto-3-6}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

###

This *inline* code has the desired effect. It "looks up" the value of `x` defined in the code chunk above. It then prints that value within the sentence, which is what we want.

But, depending on your system and settings, the result is often ugly. I get "1.2345679^{8}", which makes use of scientific notation.

### Exercise 7

Replace the inline code in your sentence with 

```{verbatim, echo = TRUE}
`r scales::comma(x)`
```

Render the document.

Run `readLines("quarto-3.qmd") |> tail(6)` at the Console. CP/CR.

```{r quarto-3-7}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

###

The `comma()` function, which comes from the **scales** package --- hence our use of the double colon (`::`) notation --- causes the value of `x` to be formatted nicely.

With *inline* code, we can insert R code of arbitrary complexity directly in the text of a Quarto document, although it is often better to keep the code itself in a code chunk, assign the final value to a variable like `x` and then have a simple piece of *inline* code, as here.

## Quarto 4
###

Let's make another Quarto document so that we can practice our skills.

### Exercise 1

Make a new Quarto document. The title is "My Fourth Quarto Document". You are the author. Name the document `quarto-4.qmd`, and instead of creating the document as normal, hit "Create Empty Document", in the bottom left corner of the creation screen. Delete the `editor: visual` line from the YAML header.

Save the document as `quarto-4.qmd`. Run `readLines("quarto-4.qmd")`. CP/CR.

```{r quarto-4-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 5)
```

###

It might be tempting to name your files `code.R` or `myscript.R`, but you should think a bit harder before choosing a name for your file. Three important principles for file naming are as follows:

* File names should be machine readable: avoid spaces, symbols, and special characters. Donâ€™t rely on case sensitivity to distinguish files.

* File names should be human readable: use file names to describe whatâ€™s in the file.

* File names should play well with default ordering: start file names with numbers so that alphabetical sorting puts them in the order they get used.


### Exercise 2

We are going to make a setup code chunk, where you can load your libraries. Add a new code chunk.

In the first line, write `#| label: setup` in order to give the code chunk the label/name "setup."

Put `library(tidyverse)` and `library(knitr)` in the code chunk.

###

**Notice the sloppy language!** There are two ways in which we can "load" **tidyverse** and **knitr**, corresponding to the two worlds we are working in simultaneous: QMD World and Console World.

###

Putting the character strings `library(tidyverse)` and `library(knitr)` inside the `setup` code chunk is enough to "load" these packages in QMD World because, whenever we render a file, every line of code in the file is sent to R for processing. Those characters, however, have no connection to Console World until we explicitly execute them by hand, generally with `Cmd/Cntrl-return`.

Do that now. Place the cursor next to the `library()` calls and hit `Cmd/Cntrl-return` twice.

###

Once all that is done, run `search()` in the Console. CP/CR

```{r quarto-4-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

###

The output of the call to `search()` should include the strings `package:tidyverse` and  `package:knitr`, indicating that both **tidyverse** and **knitr** are loaded.

### Exercise 3

Our html file looks ugly, both because of the annoying message and because it shows the R code. We want neither. Add `echo: false` and `message: false` to the code chunk options. Render the document. Copy/paste the html, which should include nothing but a title and author.

```{r quarto-4-3}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 5)
```

###

There is a great pair of keyboard shortcuts that will work together to make sure youâ€™ve captured the important parts of your code in the editor:

* Press `Cmd/Ctrl + Shift + 0` to restart R.
* Press `Cmd/Ctrl + Shift + k` to re-render the current Quarto document.

We collectively use this pattern hundreds of times a week.

Alternatively, if you donâ€™t use keyboard shortcuts, you can go to `Session > Restart R` and then press the "Render" button.

### Exercise 4

Make a new header with the title "Harvard Histogram". Remember we do this using `##`, followed by a space. Skip a line under this header, and then create a new code chunk. Use the code chunk argument `echo: false` to stop your code from showing up when you render the file.

###

In your new code chunk, use the function `include_graphics()`. Set the argument to the name of your .png. Remember to use quotes. The command should look like

```{verbatim, echo = TRUE}
include_graphics("hist-harvard.png")
```

Render the document. Run `readLines("quarto-4.qmd") |> tail(6)`. CP/CR.

```{r quarto-4-5}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

###

This should cause the graphic to appear in the html file. If you get an error, make sure that you have a file called `hist-harvard.png` in your working directory.


<!-- DK: We used to have code which added the iris plot as well, but this got tiring. -->

## Publishing
###

We'll be publishing our Quarto documents on the Internet by using Rpubs](https://rpubs.com/, a free web publishing service. Rpubs is managed by Posit (formerly RStudio), a leading company in the data science world. You will need to create an Rpubs account.

###

Sometime in the future, Rpubs will go away and be replaced by [Quarto Pub](https://quartopub.com/). But that has not (?) happened yet. Some of the images in this Section may be out of date.

### Exercise 1

Render the `quarto-4.qmd` file. By rendering, you are generating an html file, which is what Rpubs publishes on the web.

###

Run `list.files()` in the Console. CP/CR.

```{r publishing-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

###

You should see a `quarto-4.html` file, which was generated after your rendered your qmd. (Note that the "qmd" file extension stands for **Q**uarto **M**arkdown **D**document.)

###

We sometimes edit the YAML header to get rid of information like the date and title, as it sometimes looks bad in the final render. However, make sure not to mess with the rest of the YAML formatting because it is a very structurally sensitive language. You can learn more about YAML editing at [bookdown.org](https://bookdown.org/yihui/bookdown/r-markdown.html).

### Exercise 2

Notice a blue icon in the upper right-hand corner of your Quarto document. It should look like the image below.

```{r out.width = "875px"}
include_graphics("images/publish_button.png")
```

Press that button.

<!-- DK: Poor organization. What are students submitting? -->

### Exercise 3

You will be asked whether you want to publish to Rpubs or to Posit Connect. Use Rpubs. (Posit Connect costs money.) You will get a reminder that all documents you publish on RPubs are publicly visible. Click "Publish".

```{r}
include_graphics("images/rpubs-6.png")
```

### Exercise 4

This will take you to the RPubs website. You will need to create an account. Follow the steps as prompted.

```{r}
include_graphics("images/rpubs-7.png")
```

### Exercise 5

Add document details. Name your document. Add a meaningful slug (a unique website name that's often just the name of your project), otherwise you will end up with an ugly, long address you didn't choose and can't remember. You can leave the description blank if you don't want to add one.


### Exercise 6

Put the link to your RPubs page in the space below.

```{r publishing-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

###

Keep in mind that this is now a website that can be found on the internet, for anyone to see.

## Summary
###

This tutorial covered [Chapter 3 Workflow: basics](https://r4ds.hadley.nz/workflow-basics.html),  [Chapter 5  Workflow: code style](https://r4ds.hadley.nz/workflow-style.html), [Chapter 7  Workflow: scripts and projects](https://r4ds.hadley.nz/workflow-scripts.html), and some material in [Chapter 29  Quarto](https://r4ds.hadley.nz/quarto.html) from [*R for Data Science (2e)*](https://r4ds.hadley.nz/) by Hadley Wickham, Mine Ã‡etinkaya-Rundel, and Garrett Grolemund.

You now know how to use R projects, R scripts, Quarto documents, how to publish a page on the internet using RPubs, and how to use a plethora of useful R commands!

```{r download-answers, child = system.file("child_documents/download_answers.Rmd", package = "tutorial.helpers")}
```

