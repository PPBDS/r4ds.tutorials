---
title: Using AI With R
author: Luke Li
tutorial:
  id: ai-tutorial-test
output:
  learnr::tutorial:
    progressive: yes
    allow_skip: yes
runtime: shiny_prerendered
description: 'Tutorial for R for Data Science Integrated with AI (test)'
---

```{r setup, include = FALSE}
library(learnr)
library(tutorial.helpers)
library(tidyverse)

knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 600, 
        tutorial.storage = "local") 
```

```{r copy-code-chunk, child = system.file("child_documents/copy_button.Rmd", package = "tutorial.helpers")}
```

```{r info-section, child = system.file("child_documents/info_section.Rmd", package = "tutorial.helpers")}
```

## Introduction
### 

This tutorial covers [R for Datas Science (2e)](https://r4ds.hadley.nz/) by Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund. You will learn how to use the [**lubridate**](https://lubridate.tidyverse.org/) on the `flights` data from the [**nyc13flights**](https://nycflights13.tidyverse.org/) package.

## Plotting Babynames
### 

In this section we are going to focus on generating code to create a graph based on our dataset called babynames. We will be using AI to generate the code for us and then we will break down the functions within the code and how they work.

### Exercise 1

Let's load the **tidyverse** library. CP/CR

```{r ai-usage-1}
question_text(NULL,
    message = "library(tidyverse)",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 2)
``` 

### Exercise 2

Let's install the dataset we will use today: **babynames**. CP/CR

```{r ai-usage-2}
question_text(NULL,
    message = "install.packages(babynames)",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 2)
``` 

### Exercise 3

Let's load the dataset we will use today: **babynames**. CP/CR

```{r ai-usage-3}
question_text(NULL,
    message = "library(babynames)",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 2)
``` 

### Exercise 4

Print out **babynames** to view the dataset. CP/CR

```{r ai-usage-4}
question_text(NULL,
    message = "print(babynames)",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 2)
``` 

### Exercise 5

Using your favorite AI, ask it to generate R code that plots a basic graph showing the relationship between 2 variables within our **babynames** dataset. Make sure to provide a tibble for the AI to use. CP/CR your code.

```{r ai-usage-5}
question_text(NULL,
	message = "Here is our generated code:\n
babynames %>%
  filter(name == \"Mary\", sex == \"F\") %>%
  ggplot(aes(x = year, y = n)) +
  geom_line(color = \"blue\", size = 1) +
  labs(
    title = \"Popularity of the Name 'Mary' Over Time\",
    x = \"Year\",
    y = \"Number of Babies\"
  ) +
  theme_minimal()
",
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	incorrect = NULL,
	rows = 2)
```

###

In a separate window, try running the code to see what the plot looks like. Don't forget to load tidyverse and babynames.

### Exercise 6

Isolate the first two lines of code, where we filter the dataset. Change the name to another in the dataset and change the sex accordingly. View the filtered dataset by printing it. Describe the change in the dataset in a sentence or two.

```{r ai-usage-6}
question_text(NULL,
    message = "Our data looks like:
        # A tibble: 138 × 5
    year sex   name      n   prop
   <dbl> <chr> <chr> <int>  <dbl>
 1  1880 F     Mary   7065 0.0724
 2  1881 F     Mary   6919 0.0700
 3  1882 F     Mary   8148 0.0704
 4  1883 F     Mary   8012 0.0667
 5  1884 F     Mary   9217 0.0670",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 2)
``` 

###

Changing the variables in **filter()**, or objects within those variables, manipulates the dataset we use.

### Exercise 7

Going back to the whole plot code, find the line with ggplot(), and within aes(), change the **y** from **n** to **prop**. View the new plot by running it. Describe the change in the plot in a sentence or two.

```{r ai-usage-7}
question_text(NULL,
    message = "You should see that the new plot has the proportion of babies with that name each year instead of the total number of babies with that name.",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 2)
``` 

###

ggplot() creates the basis for the graph while aes() maps the arguments x and y to the axis. Changing the variables set to x and y will change what is plotted.

### Exercise 8

Next, find the line with geom_line(). Mess with the arguments, change what they are set to, and search up other arguments to add within geom_line(). You can even delete geom_line() altogether. Describe changes in a few sentences below.

```{r ai-usage-8}
question_text(NULL,
    message = "geom_line() is what actually graphs the line using the data. There are many other similar functions, such as geom_point(), geom_histogram(), geom_freqpoly(), and more which plot the data in different ways.",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 2)
``` 

###

Arguments within geom_line() change the appearance of the graph, but will not change the type of graph. To make it a histogram, use geom_histogram(), to make a scatterplot, use geom_point(), etc.