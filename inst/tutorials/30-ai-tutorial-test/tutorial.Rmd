---
title: Using AI With R
author: Luke Li
tutorial:
  id: ai-tutorial-test
output:
  learnr::tutorial:
    progressive: yes
    allow_skip: yes
runtime: shiny_prerendered
description: 'Tutorial for R for Data Science Integrated with AI (test)'
---

```{r setup, include = FALSE}
library(learnr)
library(tutorial.helpers)
library(tidyverse)

knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 600, 
        tutorial.storage = "local") 
```

```{r copy-code-chunk, child = system.file("child_documents/copy_button.Rmd", package = "tutorial.helpers")}
```

```{r info-section, child = system.file("child_documents/info_section.Rmd", package = "tutorial.helpers")}
```

## Introduction
### 

This tutorial covers [R for Datas Science (2e)](https://r4ds.hadley.nz/) by Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund. You will learn how to plot data from the **babynames** dataset.

## Plotting Babynames
### 

In this section we are going to focus on generating code to create a graph based on our dataset called babynames. We will be using AI to generate the code for us and then we will break down the functions within the code and how they work.

###

### Exercise 1

Create a Github repo called `babynames`. Make sure to click the "Add a README file" check box.

Connect the repo to a project on your computer using `File -> New Folder from Git ...`. Make sure to select the "Open in a new window" box. 

You need two Positon windows: this one for running the tutorial and the one you just created for writing your code and interacting with the Console.

Select `File -> New File -> Quarto Document ...`. Provide a title -- `"Babynames"` -- and an author (you). Render the document and save it as `analysis.qmd`.

Create a `.gitignore` file with `analysis_files` on the first line and then a blank line. Save and push.

In the Console, run:

```         
show_file(".gitignore")
```

If that fails, it is probably because you have not yet loaded `library(tutorial.helpers)` in the Console.

CP/CR.

```{r ai-usage-1}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Professionals keep their data science work in the cloud because laptops fail.

###

### Exercise 2

Let's load the **tidyverse** library in your QMD. CP/CR

```{r ai-usage-2}
question_text(NULL,
    message = "library(tidyverse)",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 2)
``` 

###

Tidyverse is a package that allows us to do datascience in R.

###

### Exercise 3

Let's install the dataset we will use today: **babynames**. CP/CR

```{r ai-usage-3}
question_text(NULL,
    message = "install.packages(babynames)",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 2)
``` 

###

Babynames is the dataset that we will be working with today. 

### Exercise 4

Let's load the dataset we will use today: **babynames**. CP/CR

```{r ai-usage-4}
question_text(NULL,
    message = "library(babynames)",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 2)
``` 

###

We load babynames into our current QMD so it is accessible to use with the rest of the code in the document.

### Exercise 5

Print out **babynames** to view the dataset. CP/CR

```{r ai-usage-5}
question_text(NULL,
    message = "print(babynames)",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 10)
``` 

###

Typing out babynames is the same as typing out print(babynames). Either way, we can see the same tibble. Look around and try to understand each column.

###

### Exercise 6

Using your favorite AI, prompt it to generate R code that takes the **babynames** and filters out all names that have a first name starting with A. Make sure to provide a tibble of **babynames** for the AI to use. Add the code to your QMD and render to check if it works. CP/CR the code.

```{r ai-usage-6}
question_text(NULL,
	message = "Here is our generated code:\na_names <- babynames %>%
  filter(str_starts(name, \"A\"))",
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	incorrect = NULL,
	rows = 4)
```

###

The filter() function is used for subsetting data frames by selecting rows that satisfy specific conditions. In this case, it takes rows using str_starts(), which essentially takes a column (name), and selects the rows where the string of name starts with A.

###

Replace your code with ours to follow along with the tutorial.

###

### Exercise 7

Next, prompt AI to generate R code that makes a new subset with the total proportion of babies with first names starting with A for each sex, from each year.

```{r ai-usage-6}
question_text(NULL,
	message = "Here is our generated code:\na_summary <- a_names %>%
  group_by(year, sex) %>%
  summarise(total_prop = sum(prop), .groups = \"drop\")",
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	incorrect = NULL,
	rows = 5)
```

###

The function group_by() allows us to split a data frame into groups based on one or more variables, and then apply a function to each group to manipulate our data. Then, summarize() creates a new data frame with rows, in this case each row is a year and sex combination with the total proportion of names starting with A.

###

### Exercise 

Now, using the same AI and the code above, ask it to generate R code that plots a basic graph showing the proportion of names starting with A over the years for each sex. Make sure to provide a tibble for the AI to use. CP/CR your code.

```{r ai-usage}
question_text(NULL,
	message = "Here is our generated code:\n
babynames %>%
  filter(name == \"Mary\", sex == \"F\") %>%
  ggplot(aes(x = year, y = n)) +
  geom_line(color = \"blue\", size = 1) +
  labs(
    title = \"Popularity of the Name 'Mary' Over Time\",
    x = \"Year\",
    y = \"Number of Babies\"
  ) +
  theme_minimal()
",
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	incorrect = NULL,
	rows = 15)
```

###

In a separate window, try running the code to see what the plot looks like. Don't forget to load tidyverse and babynames.

### Exercise 6

Isolate the first two lines of code, where we filter the dataset. Change the name to another in the dataset and change the sex accordingly. View the filtered dataset by printing it. Describe the change in the dataset in a sentence or two.

```{r ai-usage-6}
question_text(NULL,
    message = "Our data looks like:
        # A tibble: 138 × 5
    year sex   name      n   prop
   <dbl> <chr> <chr> <int>  <dbl>
 1  1880 F     Mary   7065 0.0724
 2  1881 F     Mary   6919 0.0700
 3  1882 F     Mary   8148 0.0704
 4  1883 F     Mary   8012 0.0667
 5  1884 F     Mary   9217 0.0670",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 10)
``` 

###

Changing the variables in **filter()**, or objects within those variables, manipulates the dataset we use.

### Exercise 7

Going back to the whole plot code, find the line with ggplot(), and within aes(), change the **y** from **n** to **prop**. View the new plot by running it. Describe the change in the plot in a sentence or two.

```{r ai-usage-7}
question_text(NULL,
    message = "You should see that the new plot has the proportion of babies with that name each year instead of the total number of babies with that name.",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 3)
``` 

###

**ggplot()** creates the basis for the graph while **aes()** maps the arguments x and y to the axis. Changing the variables set to x and y will change what is plotted.

### Exercise 8

Next, find the line with **geom_line()**. Mess with the arguments, change what they are set to, and search up other arguments to add within **geom_line()**. You can even delete **geom_line()** altogether. Describe changes in a few sentences below.

```{r ai-usage-8}
question_text(NULL,
    message = "geom_line() is what actually graphs the line using the data. There are many other similar functions, such as geom_point(), geom_histogram(), geom_freqpoly(), and more which plot the data in different ways.",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 5)
``` 

###

Arguments within geom_line() change the appearance of the graph, but will not change the type of graph. To make it a histogram, use geom_histogram(), to make a scatterplot, use geom_point(), etc.

### Exercise 9 

Next, find the line with **labs()** and the lines following it containings its arguments. If not already there, add **caption = ""** and **subtitle = ""**. Change around the names of the titles. CP/CR your complete **labs()** function.

```{r ai-usage-9}
question_text(NULL,
    message = "labs() provides titles and labels to the graph.",          
    answer(NULL, 
           correct = TRUE),
    allow_retry = TRUE,
    incorrect = NULL,
    rows = 5)
``` 

###

The title should capture the purpose of your graph, the subtitle should be a noticeable takeaway, the x and y axis should be fitting labels with units, and the caption should give the source of the data.

## Summary
### 

This tutorial covered [R for Datas Science (2e)](https://r4ds.hadley.nz/) by Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund. You learned how to plot data from the **babynames** dataset.

```{r download-answers, child = system.file("child_documents/download_answers.Rmd", package = "tutorial.helpers")}
```
